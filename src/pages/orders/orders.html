<div id='orders' class='page'>
  <site-header></site-header>
  <el-container>
    <el-aside width='130px'>
      <nav-menu></nav-menu>
    </el-aside>
    
    <el-main>
      <breadcrumb-bar v-bind:breadcrumbContent='breadcrumbContent'></breadcrumb-bar>
      <div class='row sb'>
        <h1>{{ orders.length }} Orders</h1>
        <order-form v-show='isAdmin' v-bind:showAddBtn='true'></order-form>
      </div>

      <el-tag type="success"> {{ numOpenOrders }} Open</el-tag>
      <el-tag type="info">{{ numCompleteOrders }} Complete</el-tag></el-tag>


      <div class='orders-list'>
        <el-table :data="orders" style="width: 100%" :row-class-name="orderStatusClass" @current-change="enterOrderView" :default-sort = "{prop: 'date', order: 'descending'}">
          <el-table-column
            prop="date"
            label="Date"
            sortable>
          </el-table-column>
          <el-table-column
            prop="client"
            label="Client">
          </el-table-column>
          <el-table-column
            prop="items.length"
            label="Size"
            sortable>
          </el-table-column>
          <el-table-column
            prop="totalValue"
            label="Value (Â£)"
            sortable>
          </el-table-column>
          <el-table-column
            prop="deliveryDate"
            label="Delivery Date"
            sortable>
          </el-table-column>
          <el-table-column
            prop="status"
            label="Status"
            sortable
            align='center'
            v-bind:filters="[{ text: 'Complete', value: 'complete' }, { text: 'Open', value: 'open' }]" 
            v-bind:filter-method="filterStatus" 
            filter-placement="bottom-end">
            <template slot-scope="scope">
              <el-tag :type="scope.row.status === 'complete' ? 'info' : 'success'" disable-transitions>{{scope.row.status}}</el-tag>
            </template>
          </el-table-column>
        </el-table>
      </div>
    </el-main>
  </el-container>
</div>
